{% extends "base.html" %}

{% block title %}Panel Agrícola{% endblock %}

{% block content %}
<div class="page-wrapper">
    <!-- Header -->
    <div class="row g-4">
        <div class="col-12">
            <div class="dashboard-header hidden-item p-4 shadow rounded">
                <div class="header-topbar">
                    <!-- Bloque central: título -->
                    <div class="header-title">
                        <h2 class="section-title">Sistema de Gestión Agrícola</h2>
                        <p class="section-subtitle opacity-75 d-none d-md-block">Control completo de su operación agrícola</p>
                    </div>
                    <!-- Bloque derecho: fecha y botón de tema -->
                    <div class="header-controls">
                        <button class="theme-toggle" id="themeToggle">
                            <i class="bi bi-moon-fill" id="themeIcon"></i>
                        </button>
                        <div class="calendar-badge fs-6 d-lg-block">
                            <i class="bi bi-calendar3"></i> <span id="current-date"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Clima -->
    <div class="dashboard-grid hidden-item" id="masonry-grid">
        <div class="weather-card hidden-item">
            <div class="card-header">
                <i class="bi bi-cloud-sun"></i> Clima en Ucacha
            </div>
            <div class="card-body text-center p-0" id="clima-container">
                <div class="spinner-border" role="status">
                    <span class="visually-hidden">Cargando...</span>
                </div>
            </div>
            <div class="card-footer text-muted small mt-3">
                Última actualización: <span id="clima-timestamp">--:--</span>
            </div>
        </div>
        <!-- Maquinaria -->
        <div class="dashboard-card hidden-item">
            <div class="card-header">
                <i class="bi bi-gear"></i> Maquinaria
            </div>
            <div class="card-body d-flex flex-column gap-2">
                <a href="{{ url_for('maquinas.listar_maquinas') }}" class="btn btn-dashboard">
                    <i class="bi bi-list-ul"></i> Listado de Máquinas</a>
            </div>
        </div>
        <!-- Componentes e Inventario -->
        <div class="dashboard-card hidden-item">
            <div class="card-header">
                <i class="bi bi-puzzle"></i> Componentes
            </div>
            <div class="card-body d-flex flex-column gap-2">
                <a href="{{ url_for('componentes.lista_componentes') }}" 
                    class="btn btn-dashboard">
                    <i class="bi bi-boxes"></i> Listado de Componentes</a>
                <a href="{{ url_for('stock.vista_stock') }}" 
                    class="btn btn-dashboard">
                    <i class="bi bi-clipboard2-check"></i> Inventario Actual</a>
            </div>
        </div>
        <!-- Compras y Proveedores -->
        <div class="dashboard-card hidden-item">
            <div class="card-header">
                <i class="bi bi-cart-plus"></i> Compras
            </div>        
            <div class="card-body d-flex flex-column gap-2">        
                <a href="{{ url_for('proveedores.listar_proveedores') }}" class="btn btn-dashboard">
                    <i class="bi bi-people"></i> Ver Proveedores</a>

                <a href="{{ url_for('compras.registrar_compra') }}" class="btn btn-dashboard">
                    <i class="bi bi-journal-plus"></i> Registrar Compra</a>

                <a href="{{ url_for('compras.historial_compras') }}" class="btn btn-dashboard">
                    <i class="bi bi-clock-history"></i> Historial de Compras</a>
            </div>        
        </div>
        <!-- Pagos y Cuentas -->
        <div class="dashboard-card hidden-item">
            <div class="card-header">
                <i class="bi bi-cash-stack"></i> Pagos
            </div>
            <div class="card-body d-flex flex-column gap-2"> 
                <a href="{{ url_for('pagos.registrar_pago') }}" class="btn btn-dashboard">
                    <i class="bi bi-wallet2"></i> Registrar Pago</a>
                <a href="{{ url_for('pagos.resumen_cuentas') }}" class="btn btn-dashboard">
                    <i class="bi bi-file-earmark-text"></i> Resumen de Cuentas</a>
                <a href="{{ url_for('pdf.exportar_resumen_pdf') }}" class="btn btn-dashboard">
                    <i class="bi bi-file-earmark-pdf"></i> Exportar PDF</a>
            </div>
        </div>
        <!-- Gráficos -->
        <div class="dashboard-card hidden-item">
            <div class="card-header">
                <i class="bi bi-bar-chart"></i> Análisis Visual
            </div>        
            <div class="card-body d-flex flex-column gap-2"> 
                <a href="{{ url_for('estadisticas.compras_por_proveedor') }}" class="btn btn-dashboard">
                    <i class="bi bi-pie-chart"></i> Compras por Proveedor</a>
                <a href="#" class="btn btn-dashboard disabled-feature">
                    <i class="bi bi-graph-up"></i> Más comprado</a>
                <a href="#" class="btn btn-dashboard disabled-feature">
                    <i class="bi bi-calendar-month"></i> Compras por período</a>
                <a href="#" class="btn btn-dashboard disabled-feature">
                    <i class="bi bi-box-seam"></i> Cantidad por pieza</a>
            </div>
        </div>
        <!-- Excel y Filtros -->
        <div class="dashboard-card hidden-item">
            <div class="card-header">
                <i class="bi bi-file-excel"></i> Exportaciones
            </div>            
            <div class="card-body d-flex flex-column gap-2"> 
                <a href="#" class="btn btn-dashboard disabled-feature">
                    <i class="bi bi-file-earmark-excel"></i> Exportar a Excel</a>
                <a href="#" class="btn btn-dashboard disabled-feature">
                    <i class="bi bi-funnel"></i> Filtros Avanzados</a>
                <!-- Línea separadora con mensaje -->
                <div class="mt-3 pt-2 border-top custom-border" style="text-align: center;">
                    <small class="text-muted">
                        <i class="bi bi-info-circle"></i> Próximas características en desarrollo</small>
                </div>
                <div id="app"></div>
            </div>
        </div>
    </div>
</div>
<script></script>
<style>
#dashboard-grid {
  display: block;
  width: 100%;
}
.dashboard-grid {
  display: block;
  grid-template-columns: repeat(auto-fill, minmax(244px, 1fr));
  gap: 1.5rem;
  align-items: start;
}
@media (min-width: 768px) {
  .dashboard-grid {
    column-count: 2;
  }
}
@media (min-width: 1024px) {
  .dashboard-grid {
    column-count: 3;
  }
}
@media (min-width: 1280px) {
  .dashboard-grid {
    column-count: 4;
  }
}
@media (min-width: 768px) {
    .dashboard-grid {
        column-count: 2;
    }
}
@media (min-width: 1024px) {
    .dashboard-grid {
        column-count: 3;
    }
}
@media (min-width: 1280px) {
    .dashboard-grid {
        column-count: 4;
    }
}
/* Opcional: animación staggered */
.dashboard-card:nth-child(1) { animation-delay: 0.05s; }
.dashboard-card:nth-child(2) { animation-delay: 0.1s; }
.dashboard-card:nth-child(3) { animation-delay: 0.15s; }
/* Automatizar con JS */
</style>
{% endblock %}
